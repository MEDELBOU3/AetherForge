.canvas-container {
    flex: 1;
    background-color: #101010;
    overflow: hidden; /* Hide scrollbars, we handle panning manually */
    position: relative;
    cursor: default; /* Will change based on tool */
}

.canvas-viewport {
    position: absolute; /* We will move this with JS */
    transform-origin: 0 0; /* Crucial: Zoom from top-left coordinate system */
    
    /* Checkerboard */
    background-color: #fff;
    background-image:
      linear-gradient(45deg, #ccc 25%, transparent 25%),
      linear-gradient(-45deg, #ccc 25%, transparent 25%),
      linear-gradient(45deg, transparent 75%, #ccc 75%),
      linear-gradient(-45deg, transparent 75%, #ccc 75%);
    background-size: 20px 20px;
    background-position: 0 0, 0 10px, 10px -10px, -10px 0px;
    
    box-shadow: 0 0 50px rgba(0,0,0,0.5);
    pointer-events: none; /* Let events pass through to canvas, but we handle them in container */
}

canvas {
    display: block;
    position: absolute;
    top: 0;
    left: 0;
    pointer-events: auto; /* Re-enable pointer events on the canvas itself */
}

/* Optional: Add a visual border to the active canvas area */
#ui-canvas {
    border: 1px solid rgba(255,255,255,0.2);
}

/* Transform Handles */
.transform-box {
    position: absolute;
    border: 1px solid #0078d4;
    pointer-events: none; /* Logic handles interaction */
    z-index: 100;
    box-shadow: 0 0 0 1px rgba(255, 255, 255, 0.5); /* Double border for visibility */
}

.transform-handle {
    width: 10px;
    height: 10px;
    background: white;
    border: 1px solid #0078d4;
    position: absolute;
    pointer-events: auto; /* Handles are clickable */
    z-index: 101;
}

/* Handle Positions */
.handle-tl { top: -6px; left: -6px; cursor: nwse-resize; }
.handle-tr { top: -6px; right: -6px; cursor: nesw-resize; }
.handle-bl { bottom: -6px; left: -6px; cursor: nesw-resize; }
.handle-br { bottom: -6px; right: -6px; cursor: nwse-resize; }